# PQCrypto

Integrating post-quantum cryptography into browser-based JS, WebAssembly, and NodeJs
-----------------------------------------------------------------------------------

PQCrypto is an open source PQC project with the goal of integrating NIST's ongoing standardization or other secure PQC algorithms into browser-based JS, WebAssembly, and NodeJs.

![npm version](https://img.shields.io/npm/v/pqcrypto)
![build status](https://img.shields.io/github/actions/workflow/status/novablocks/pqcrypto/ci.yml)
![license](https://img.shields.io/github/license/novablocks/pqcrypto)
![coverage](https://img.shields.io/codecov/c/github/novablocks/pqcrypto)

## Table of Contents

- [Supported Algorithms](#supported-algorithms)
- [Installation](#installation)
- [Usage](#usage)
- [Example Output](#example-output)
- [API Reference](#api-reference)
- [Browser Usage](#browser-usage)
- [Running Tests](#running-tests)
- [Contributing](#contributing)
- [Security Notice](#security-notice)
- [Issue Reporting](#issue-reporting)
- [License](#license)
- [Project Status](#project-status)
- [Learn More](#learn-more)
- [Community](#community)

## Supported Algorithms

**Public-key Encryption and Key-establishment:**

- Classic McEliece
- CRYSTALS-KYBER (NIST finalist)
- NTRU
- SABER

**Digital Signature Algorithms:**

- CRYSTALS-DILITHIUM (NIST finalist)
- FALCON

## Installation

```bash
npm install pqcrypto
```

## Usage

```js
const pqcrypto = require('pqcrypto');

// Example: Key generation with Kyber
const { publicKey, privateKey } = pqcrypto.kyber.keyPair();

// Example: Encryption
const ciphertext = pqcrypto.kyber.encrypt(publicKey, Buffer.from('Hello'));

// Example: Decryption
const plaintext = pqcrypto.kyber.decrypt(privateKey, ciphertext);
```

## Example Output

```js
console.log(ciphertext.toString('base64')); // Output: (base64 ciphertext)
console.log(plaintext.toString()); // Output: Hello
```

## API Reference

### Key Generation

```js
const { publicKey, privateKey } = pqcrypto.<algorithm>.keyPair();
```

- `<algorithm>`: `kyber`, `ntru`, `saber`, etc.
- Returns: `{ publicKey: Buffer, privateKey: Buffer }`

### Encryption

```js
const ciphertext = pqcrypto.<algorithm>.encrypt(publicKey, Buffer.from('message'));
```

- `publicKey`: Buffer — The public key generated by `keyPair()`.
- `Buffer.from('message')`: Buffer — The message to encrypt.
- Returns: `Buffer` — The encrypted ciphertext.

### Decryption

```js
const plaintext = pqcrypto.<algorithm>.decrypt(privateKey, ciphertext);
```

- `privateKey`: Buffer — The private key generated by `keyPair()`.
- `ciphertext`: Buffer — The encrypted message.
- Returns: `Buffer` — The decrypted plaintext.

### Digital Signatures

```js
const { publicKey, privateKey } = pqcrypto.dilithium.keyPair();
const signature = pqcrypto.dilithium.sign(privateKey, Buffer.from('message'));
const isValid = pqcrypto.dilithium.verify(publicKey, Buffer.from('message'), signature);
```

- `sign(privateKey, message)`: Signs a message with the private key. Returns a signature `Buffer`.
- `verify(publicKey, message, signature)`: Verifies the signature for a message. Returns `true` or `false`.

> **Note:** All cryptographic operations use Buffers for input and output. Convert strings to Buffers using `Buffer.from('your string')`.
>
> **Tip:** For browser usage, ensure you use a bundler that supports Buffer or use a polyfill.

## Browser Usage

PQCrypto can also be used in browser environments via WebAssembly.  
**Note:** You may need a Buffer polyfill or bundler configuration (e.g., with webpack or browserify).

```js
import pqcrypto from 'pqcrypto';
// Usage is the same as Node.js
```

## Running Tests

```bash
npm test
```

## Contributing

Contributions are welcome! Please see [CONTRIBUTING.md](CONTRIBUTING.md) for guidelines.

## Security Notice

Post-quantum cryptography is an evolving field. Algorithms and implementations may change as new research emerges and NIST finalizes standards. Always keep dependencies up to date and review [NIST PQC](https://csrc.nist.gov/Projects/post-quantum-cryptography) for the latest recommendations.

If you discover a security vulnerability, please open an issue or email us at [contact@novablocks.org].

## Issue Reporting

If you find a bug or security vulnerability, please open an issue or contact the maintainers.

## License

This project is licensed under the MIT License.

## Project Status

This project is under active development and may change as post-quantum cryptography standards evolve. Use in production at your own risk.

## Learn More

- [NIST PQC Project](https://csrc.nist.gov/Projects/post-quantum-cryptography)
- [CRYSTALS-KYBER](https://pq-crystals.org/kyber/)
- [CRYSTALS-DILITHIUM](https://pq-crystals.org/dilithium/)
- [FALCON](https://falcon-sign.info/)
- [NTRU](https://ntru.org/)
- [Classic McEliece](https://classic.mceliece.org/)
- [SABER](https://www.esat.kuleuven.be/cosic/pqcrypto/saber/)

## Community

Questions or suggestions? Open an issue or join our [community chat](https://discord.gg/novablocks)
(add your link).

---

Thank you for using PQCrypto!  
If you have feedback or want to contribute, please check the [Contributing](#contributing) section above.

---

## Code Quality & CI

Add the following to your `package.json` scripts:

```json
"scripts": {
  "lint": "eslint .",
  "format": "prettier --write .",
  "test": "jest",
  "coverage": "nyc npm test",
  "build": "tsc"
}
```

And use this GitHub Actions workflow as `.github/workflows/ci.yml`:

```yaml
name: CI
on: [push, pull_request]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '20'
      - run: npm ci
      - run: npm run lint
      - run: npm test
```

## Recommended ESLint and Prettier Configuration

Create a `.eslintrc.json` file in your project root:

```json
{
  "env": {
    "es2021": true,
    "node": true
  },
  "extends": [
    "eslint:recommended"
  ],
  "parserOptions": {
    "ecmaVersion": 12,
    "sourceType": "module"
  },
  "rules": {
    "semi": ["error", "always"],
    "quotes": ["error", "single"]
  }
}
```

Create a `.prettierrc` file:

```json
{
  "singleQuote": true,
  "semi": true,
  "printWidth": 80
}
```

> **Tip:** Run `npx eslint .` and `npx prettier --write .` to check and format your codebase.

---

By following these steps, you ensure consistent code quality and formatting across your project.

## Test Coverage

To ensure high code quality, add test coverage reporting to your project.

1. **Install nyc (Istanbul) for coverage:**

    ```bash
    npm install --save-dev nyc
    ```

1. **Add a coverage script to your `package.json`:**

    ```json
    "scripts": {
      "test": "jest",
      "coverage": "nyc npm test"
    }
    ```

1. **Run your tests with coverage:**

    ```bash
    npm run coverage
    ```

1. **Add a coverage badge to your README:**

    ```markdown
    ![coverage](https://img.shields.io/codecov/c/github/novablocks/pqcrypto)
    ```

> **Tip:** Replace `your-org` with your actual GitHub organization or username.

---

By integrating coverage reporting, you help maintain a robust and reliable codebase.

## Branch Protection & Code Review

To further ensure code quality and stability:

1. **Enable branch protection rules** on your main branch in your repository settings:
    - Require pull request reviews before merging.
    - Require status checks to pass before merging (e.g., CI, lint, and test checks).
    - Optionally, require branches to be up to date before merging.

1. **Require code reviews** for all pull requests:
    - Encourage team members to review code for clarity, security, and correctness.
    - Use GitHub’s review tools to request changes or approve PRs.

1. **Document your workflow** in a `CONTRIBUTING.md` file:
    - Describe your code style, review process, and how to run tests/lint locally.

---

By enforcing these practices, you help maintain a high-quality, stable, and collaborative codebase.

## CHANGELOG

Maintain a `CHANGELOG.md` file in your repository root to document all notable changes, bug fixes, and breaking changes for each release.

**Example `CHANGELOG.md` entry:**

```markdown
# Changelog

## [1.2.0] - 2025-06-07
### Added
- Added support for FALCON signatures.
- Introduced browser usage example in README.

### Changed
- Updated Kyber implementation for NIST compliance.

### Fixed
- Fixed buffer conversion bug in encryption API.
```

> **Tip:** Follow [Keep a Changelog](https://keepachangelog.com/en/1.0.0/) and [Semantic Versioning](https://semver.org/) best practices.

---

By maintaining a clear changelog, you make it easier for users and contributors to track project progress and breaking changes.

version: 2
updates:
  - package-ecosystem: "npm"
    directory: "/"
    schedule:
      interval: "daily"

name: Azure Static Web Apps CI/CD

on:
  push:
    branches:
      - main
  pull_request:
    types: [opened, synchronize, reopened, closed]
    branches:
      - main

jobs:
  build_and_deploy_job:
    runs-on: ubuntu-latest
    name: Build and Deploy Job
    steps:
      - uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: Install dependencies
        run: npm install
        working-directory: docs-site

      - name: Build static site
        run: npm run build
        working-directory: docs-site

      - name: Deploy to Azure Static Web Apps
        uses: Azure/static-web-apps-deploy@v1
        with:
          azure_static_web_apps_api_token: ${{ secrets.AZURE_STATIC_WEB_APPS_API_TOKEN }}
          repo_token: ${{ secrets.GITHUB_TOKEN }}
          action: "upload"
          app_location: "docs-site"
          output_location: "build"

See `.github/workflows/azure-static-web-apps.yml` for the Azure Static Web Apps deployment workflow.
